<div
  id="vanta-bg"
  style="width: 100vw; height: 100vh; position: absolute; top: 0; left: 0; z-index: -1;">
</div>

<!-- Load Three.js and Vanta.js from CDN -->
<script is:inline src="https://cdnjs.cloudflare.com/ajax/libs/three.js/0.155.0/three.min.js"
></script>
<script is:inline src="https://cdn.jsdelivr.net/npm/vanta@0.5.24/dist/vanta.dots.min.js"></script>

<!-- Initialize Vanta -->
<script>
  window.addEventListener("load", () => {
    const element = document.getElementById("vanta-bg");
    if (!element) {
      console.error("Background element not found");
      return;
    }

    // Check current theme
    const isLightTheme = document.documentElement.classList.contains("theme-light");

    // Initialize with appropriate theme colors
    let effect = VANTA.DOTS({
      el: element,
      mouseControls: true,
      touchControls: true,
      gyroControls: true,
      minHeight: 200.0,
      minWidth: 200.0,
      scale: 1.0,
      scaleMobile: 1.0,
      // Use light theme colors if light theme is active, otherwise use dark theme colors
      color: isLightTheme ? 0x333333 : 0xd5d5d5, // Dots color
      backgroundColor: isLightTheme ? 0xf5f5f5 : 0x222222, // Background color
      size: 1.0,
      spacing: 35.0,
      showLines: false,
    });

    // Listen for theme changes
    document.addEventListener("themeChanged", (e) => {
      // Get the current theme
      const isLightTheme = document.documentElement.classList.contains("theme-light");

      // Destroy the current effect
      if (effect && typeof effect.destroy === "function") {
        effect.destroy();
      }

      // Create a new effect with the appropriate colors
      effect = VANTA.DOTS({
        el: element,
        mouseControls: true,
        touchControls: true,
        gyroControls: true,
        minHeight: 200.0,
        minWidth: 200.0,
        scale: 1.0,
        scaleMobile: 1.0,
        // Use light theme colors if light theme is active, otherwise use dark theme colors
        color: isLightTheme ? 0x333333 : 0xd5d5d5, // Dots color
        backgroundColor: isLightTheme ? 0xf5f5f5 : 0x222222, // Background color
        size: 1.0,
        spacing: 35.0,
        showLines: false,
      });
    });
  });
</script>
